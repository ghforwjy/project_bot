## 问题分析

### 1. 日期无法清空问题
- **前端问题**：TaskModal.tsx 中，当日期为空时发送 `undefined`，但后端使用 `exclude_unset=True` 会忽略这些字段
- **后端问题**：后端没有正确处理日期清空逻辑，且日期解析逻辑有问题

### 2. 项目明细页面编辑功能
- ProjectDetailModal.tsx 使用内联编辑，需要改为调用 TaskModal 对话框

## 解决方案

### 步骤1：修复前端日期清空逻辑
**文件**: frontend/src/components/project/TaskModal.tsx
- 将 `undefined` 改为 `null`，确保后端能接收到清空指令

### 步骤2：修复后端日期处理逻辑
**文件**: backend/api/task.py
- 不使用 `exclude_unset=True`，或者显式处理 `null` 值
- 简化日期解析逻辑

### 步骤3：修改项目明细页面
**文件**: frontend/src/components/project/ProjectDetailModal.tsx
- 添加 TaskModal 组件引用
- 将内联编辑改为打开 TaskModal 对话框
- 删除内联编辑相关代码

## 具体修改

### 1. TaskModal.tsx - 日期清空
```typescript
// 将 undefined 改为 null
actual_start_date: values.actual_start_date ? values.actual_start_date.format('YYYY-MM-DD') : null,
```

### 2. task.py - 后端处理
```python
# 不使用 exclude_unset=True，或者显式处理 null
update_data = task_update.dict()
# 处理 None 值
for field in date_fields:
    if field in update_data and update_data[field] is None:
        update_data[field] = None
```

### 3. ProjectDetailModal.tsx - 使用TaskModal
- 导入 TaskModal
- 添加 taskModalVisible 和 editingTaskId 状态
- 点击编辑按钮时打开 TaskModal
- 删除内联编辑代码（editingTaskId, editingTaskData, startEditing, saveEditing, cancelEditing）