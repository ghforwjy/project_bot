# 甘特图间距优化方案（真正生效版）

## 问题根源
甘特图使用D3.js的yScale将计算出的总高度压缩到固定的SVG高度（600px），导致之前的间距修改被压缩后视觉效果不明显。

## 核心解决方案
在calculateTotalHeight中**增加固定的padding值**，而不是修改单个元素的高度。这样即使被压缩，不同层级之间的间距仍然有明显差异。

## 具体修改点

### GanttChart.tsx

1. **calculateTotalHeight函数**（第297-302行）
   - 添加大类之间的padding：20px
   - 添加项目之间的padding：12px
   - 添加任务之间的padding：8px
   - 修改后的总高度 = 原有高度 + padding总和

2. **calculateCategoryHeight函数**（第305-313行）
   - 大类底部padding：12px
   - 修改：return 50 + category.projects.reduce(...) + 12

3. **calculateProjectHeight函数**（第316-319行）
   - 项目底部padding：8px
   - 修改：return 32 + project.tasks.length * 32 + 8

4. **renderCategory函数**（第455行）
   - 项目起始位置调整为：yPosition + 50（保持不变）

5. **renderProject函数**（第541行）
   - 任务起始位置调整为：yPosition + 32（保持不变）

6. **renderTask函数**（第554行）
   - 任务间距保持：taskY += 32（保持不变）

### 间距层次设计（压缩后仍可见）

| 层级关系 | 添加padding | 压缩后效果 |
|---------|-----------|----------|
| 大类 → 大类 | 20px | 明显分隔 |
| 项目 → 项目 | 12px | 清晰分隔 |
| 任务 → 任务 | 8px | 紧凑排列 |
| 大类 → 项目 | 50px（标题） | 紧密关联 |
| 项目 → 任务 | 32px（标题） | 逻辑分组 |

## 技术优势
✅ **padding在大类/项目/任务之间累加**，压缩后仍有视觉效果
✅ **不依赖yScale的压缩比例**，间距始终可见
✅ **符合UI/UX设计原则**，清晰的视觉层次
✅ **保持响应式**，适配不同屏幕尺寸