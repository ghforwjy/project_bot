# 为历史会话添加删除功能

## 功能需求
- 为历史会话列表中的每个会话添加删除图标
- 点击删除图标后弹出删除确认框
- 用户确认后删除该历史会话的所有信息
- 确保删除操作的安全性和用户体验

## 删除的信息
1. **Conversation表**：删除该会话的所有消息记录
2. **SessionInfo表**：删除该会话的信息记录（包含会话名字等）

## 实现方案

### 1. 前端修改

#### 修改MainLayout.tsx
- **添加删除图标**：在每个会话项的操作按钮区域添加删除图标（🗑️）
- **添加确认对话框**：使用Ant Design的Modal组件实现删除确认框
- **实现删除逻辑**：
  - 添加删除状态管理（删除中、删除确认状态）
  - 实现删除按钮点击事件
  - 实现确认删除和取消删除的逻辑
  - 调用后端API删除会话
  - 更新前端会话列表

#### 技术细节
- 使用useState管理删除确认状态
- 使用Modal组件实现确认对话框
- 添加loading状态防止重复点击
- 调用`/api/v1/chat/sessions/{sessionId}` DELETE API

### 2. 后端修改

#### 修改chat.py
- **创建删除会话API**：添加`DELETE /chat/sessions/{session_id}`端点
- **实现删除逻辑**：
  - 删除Conversation表中该会话的所有消息
  - 删除SessionInfo表中该会话的信息
  - 返回删除结果

#### 技术细节
- 使用路径参数获取session_id
- 实现事务性删除，确保数据一致性
- 返回删除的消息数量和操作结果

## 3. 界面设计
- **删除图标位置**：与会话名字旁边的编辑图标并列
- **图标样式**：使用红色删除图标，hover时显示红色
- **确认对话框**：
  - 标题："确认删除"
  - 内容："确定要删除该历史会话吗？此操作不可恢复。"
  - 按钮："取消"和"确认删除"
  - 样式：使用危险按钮样式

## 4. 测试验证
- 验证删除图标显示正确
- 验证点击删除图标后弹出确认框
- 验证确认后会话被正确删除
- 验证取消后会话保持不变
- 验证删除后前端会话列表自动更新
- 验证删除操作的错误处理

## 5. 安全考虑
- 添加删除确认步骤，防止误操作
- 实现删除过程中的loading状态
- 确保删除操作的事务性，避免数据不一致
- 添加适当的错误处理和用户反馈