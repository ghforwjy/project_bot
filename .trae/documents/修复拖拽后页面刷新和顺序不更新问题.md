## 问题分析

1. **全屏刷新问题**：使用了 `window.location.reload()` 导致整个页面刷新，应该使用React Query的缓存失效机制来刷新数据
2. **顺序不更新问题**：需要检查API调用是否成功，以及order计算逻辑是否正确

## 解决方案

### 1. 使用React Query刷新数据
替换 `window.location.reload()` 为：
```typescript
// 使用React Query的invalidateQueries刷新数据
queryClient.invalidateQueries({ queryKey: ['gantt', projectId || 'all'] })
```

### 2. 修复order计算逻辑
需要重新考虑order的计算方式：
- 当前逻辑：如果在目标下方，order = targetOrder + 1
- 问题：这样可能导致order值不连续
- 改进：使用交换order的方式，或者重新计算所有任务的order

### 3. 简化实现
考虑到复杂性，先实现一个简单但可靠的方案：
- 拖拽时记录目标任务的ID
- 调用专门的reorder API（需要后端支持）
- 或者前端重新排序后批量更新

## 实施步骤

**步骤1**：添加React Query的queryClient
**步骤2**：替换window.location.reload为invalidateQueries
**步骤3**：检查并修复order计算逻辑
**步骤4**：添加错误处理和用户反馈

## 修改文件

1. **frontend/src/components/gantt/GanttChart.tsx**
   - 导入useQueryClient
   - 替换刷新逻辑
   - 修复order计算

2. **backend/api/task.py**（如果需要）
   - 添加批量更新order的API