# 甘特图项目进度标签鼠标悬停功能实现计划

## 功能需求
在甘特图的项目进度标签上添加鼠标悬停功能，显示详细的进度计算信息，聚焦于进度算法的分子分母拆解。

## 修改范围
- **仅修改甘特图组件**：`frontend/src/components/gantt/GanttChart.tsx`
- **不影响其他功能**：保持现有甘特图功能不变，只添加新的鼠标悬停功能

## 实现方案

### 1. 为项目进度标签添加鼠标悬停事件
在 `renderProject` 函数中，为项目进度标签文本添加 `mouseover` 和 `mouseout` 事件处理。

### 2. 显示核心进度计算信息
当鼠标悬停在进度标签上时，显示包含以下核心信息的tooltip：

#### 进度算法拆解
- **当前进度**：X%
- **计算公式**：(实际已进行天数 / 计划总天数) × 100%

#### 分子详细信息（实际已进行天数）
- **已完成任务**：N个，贡献天数：D天
- **进行中任务**：M个，贡献天数：E天
- **总计**：D+E天

#### 分母详细信息（计划总天数）
- **总任务数**：T个
- **计划总天数**：P天
- **平均任务计划天数**：P/T天

#### 时间进度对比
- **时间进度**：(当前日期 - 计划开始日期) / (计划结束日期 - 计划开始日期) × 100%
- **实际进度**：X%
- **进度状态**：正常/滞后/超前

#### 关键任务影响
- **关键任务状态**：进行中/已完成/未开始
- **对进度的影响**：正面/中性/负面

### 3. 技术实现细节

#### 3.1 修改 `renderProject` 函数
- 为进度标签文本添加 `style('cursor', 'pointer')` 使其显示为可点击状态
- 添加 `on('mouseover', function() {...})` 事件处理
- 添加 `on('mouseout', function() {...})` 事件处理

#### 3.2 构建tooltip内容
- 使用现有的 `showTooltip` 函数显示tooltip
- 构建聚焦于进度计算的tooltip内容数组
- 确保tooltip显示位置合理，避免溢出

#### 3.3 数据计算
- 从 `project.tasks` 中计算任务状态分布
- 计算每个任务的计划天数和实际已进行天数
- 汇总计算分子和分母

## 具体修改步骤

1. **定位修改位置**：在 `renderProject` 函数中找到项目进度标签的渲染代码（约第669行）

2. **添加鼠标事件处理**：
   - 为进度标签文本添加 `style('cursor', 'pointer')`
   - 添加 `mouseover` 事件处理函数
   - 添加 `mouseout` 事件处理函数

3. **计算进度相关数据**：
   - 计算计划总天数
   - 计算实际已进行天数
   - 计算任务状态分布
   - 计算时间进度对比

4. **构建tooltip内容**：
   - 构建聚焦于进度算法的tooltip内容数组
   - 确保信息层次清晰，重点突出

5. **调用showTooltip函数**：
   - 在 `mouseover` 事件中调用 `showTooltip` 函数
   - 在 `mouseout` 事件中移除tooltip

## 预期效果
当用户将鼠标放在甘特图的项目进度标签上时，会显示一个聚焦于进度计算算法的tooltip，清晰展示进度的分子分母拆解，帮助用户理解进度是如何计算出来的，以及当前进度的真实状况。