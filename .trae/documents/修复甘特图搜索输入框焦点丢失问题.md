## 问题分析

**问题现象**：搜索框一打字就失去焦点

**根本原因**：
- `ControlBar` 组件在 `GanttChart` 组件内部定义，每次 `GanttChart` 重新渲染时都会被重新创建
- 当甘特图数据变化或其他状态更新时，`ControlBar` 组件重新渲染，导致 `SearchInput` 组件也被重新创建，从而失去焦点

## 修复方案

**方案1：将 ControlBar 组件移到外部**
- 将 `ControlBar` 组件定义移到 `GanttChart` 组件外部
- 通过 props 传递必要的状态和回调函数
- 优点：彻底解决重新创建问题，性能最优
- 缺点：需要调整组件结构

**方案2：使用 useMemo 缓存 ControlBar**
- 在 `GanttChart` 组件内部使用 `useMemo` 缓存 `ControlBar` 组件
- 确保依赖项正确设置
- 优点：修改最小，保持组件结构不变
- 缺点：依赖项管理需要谨慎

**方案3：优化 SearchInput 组件**
- 为 `SearchInput` 组件添加 key 属性
- 优化状态管理，避免不必要的重新渲染
- 优点：局部修改，影响范围小
- 缺点：可能无法完全解决问题

## 推荐方案

**选择方案1**：将 ControlBar 组件移到外部

**理由**：
- 彻底解决组件重新创建导致的焦点丢失问题
- 提高代码可维护性和性能
- 符合 React 组件设计最佳实践

## 修复步骤

1. **移动 ControlBar 组件**：将 `ControlBar` 组件定义从 `GanttChart` 组件内部移到外部
2. **添加必要的 props**：为 `ControlBar` 组件添加必要的 props，包括状态和回调函数
3. **修改 GanttChart 组件**：更新 `GanttChart` 组件，使用外部的 `ControlBar` 组件
4. **测试验证**：确保搜索框焦点问题已修复，同时甘特图其他功能正常

## 预期效果

- 搜索框在打字时保持焦点
- 甘特图其他功能（如拖拽、展开/折叠、数据显示）不受影响
- 组件性能得到改善，减少不必要的重新渲染