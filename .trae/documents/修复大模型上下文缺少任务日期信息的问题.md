## 问题分析

从代码分析中发现，大模型生成的JSON指令中使用了"预计开始时间"和"预计完成时间"这样的文字描述，而不是实际的日期值。这是因为当前构建的上下文信息不完整：

### 当前上下文包含的信息

1. **项目信息**（chat.py:405-408）：
   - 项目名称
   - 描述
   - 状态
   - 任务数量

2. **任务信息**（chat.py:414-417）：
   - 任务名称
   - 负责人
   - 状态

### 缺少的信息

1. **项目缺少的信息**（从Project.to_dict方法分析）：
   - 项目进度 (progress)
   - 项目开始日期 (start_date)
   - 项目结束日期 (end_date)
   - 项目类别 (category_name)

2. **任务缺少的信息**（从Task.to_dict方法分析）：
   - 任务描述 (description)
   - 计划开始日期 (planned_start_date)
   - 计划结束日期 (planned_end_date)
   - 实际开始日期 (actual_start_date)
   - 实际结束日期 (actual_end_date)
   - 任务进度 (progress)
   - 交付物 (deliverable)
   - 优先级 (priority)

## 解决方案

修改`backend/api/chat.py`中构建上下文的逻辑，添加完整的项目和任务信息：

### 1. 更新项目信息部分

```python
# 修改前
system_content += f"\n\n### 项目: {project.get('name')}"
system_content += f"\n描述: {project.get('description', '无')}"
system_content += f"\n状态: {project.get('status', '未知')}"
system_content += f"\n任务数量: {len(project.get('tasks', []))}"

# 修改后
system_content += f"\n\n### 项目: {project.get('name')}"
system_content += f"\n描述: {project.get('description', '无')}"
system_content += f"\n状态: {project.get('status', '未知')}"
system_content += f"\n进度: {project.get('progress', 0)}%"
system_content += f"\n开始日期: {project.get('start_date', '无')}"
system_content += f"\n结束日期: {project.get('end_date', '无')}"
system_content += f"\n类别: {project.get('category_name', '无')}"
system_content += f"\n任务数量: {len(project.get('tasks', []))}"
```

### 2. 更新任务信息部分

```python
# 修改前
for task in tasks:
    assignee = task.get('assignee', '未分配')
    status = task.get('status', '未知')
    system_content += f"\n- {task.get('name')} (负责人: {assignee}, 状态: {status})"

# 修改后
for task in tasks:
    assignee = task.get('assignee', '未分配')
    status = task.get('status', '未知')
    progress = task.get('progress', 0)
    planned_start = task.get('planned_start_date', '无')
    planned_end = task.get('planned_end_date', '无')
    actual_start = task.get('actual_start_date', '无')
    actual_end = task.get('actual_end_date', '无')
    priority = task.get('priority', '无')
    
    system_content += f"\n- {task.get('name')} (负责人: {assignee}, 状态: {status}, 进度: {progress}%, "
    system_content += f"计划开始: {planned_start}, 计划结束: {planned_end}, "
    system_content += f"实际开始: {actual_start}, 实际结束: {actual_end}, 优先级: {priority})"
```

## 预期效果

修改后，大模型将能够从上下文中获取到项目和任务的完整信息，包括所有日期字段，生成的JSON指令将包含实际的日期值和其他详细信息，而不是文字描述，从而避免日期解析错误和信息不完整的问题。