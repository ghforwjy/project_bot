# 项目详情弹窗编辑功能实现计划

## 功能需求
1. **移除右侧详情面板**：不再使用侧边栏展示项目详情，完全改为弹窗形式
2. **为任务列表添加编辑功能**：
   - 任务名称、描述、负责人等文本字段可编辑
   - 任务的所有时间字段使用日期选择器编辑
   - 优先级提供下拉选项编辑
   - 状态提供下拉选项编辑
   - 其他字段也都提供编辑功能
3. **编辑交互形式与项目列表保持一致**：点击字段进入编辑状态，提供保存和取消按钮

## 实现步骤

### 1. 移除右侧详情面板
- **修改 MainLayout.tsx**：移除右侧的 Sider 组件，不再加载 DetailSidebar 组件
- **调整布局**：修改 Content 组件的样式，使其占据整个可用空间

### 2. 修改 ProjectDetailModal 组件
- **添加状态管理**：
  - 添加 `editingTaskId` 状态存储当前编辑的任务ID
  - 添加 `editingTaskData` 状态存储编辑中的任务数据
- **添加编辑功能**：
  - 修改任务列表的列定义，为每个字段添加可编辑功能
  - 为文本字段使用 Input 组件
  - 为时间字段使用 DatePicker 组件
  - 为优先级和状态字段使用 Select 组件
  - 添加编辑状态的切换和保存功能
- **添加任务更新 mutation**：
  - 添加 `updateTaskMutation` 用于调用 API 更新任务
  - 实现任务更新的成功/失败处理

### 3. 技术实现
- **编辑交互**：参考项目列表的编辑交互形式，点击字段进入编辑状态
- **数据管理**：使用 React Query 管理任务数据和更新操作
- **组件样式**：使用与项目列表一致的 Ant Design 组件样式
- **错误处理**：添加错误处理和成功/失败消息提示

### 4. 预期效果
- **移除右侧详情面板**：界面布局更加简洁，项目详情完全通过弹窗展示
- **任务编辑功能**：所有任务字段都可以编辑，编辑交互与项目列表保持一致
- **实时更新**：编辑完成后，任务数据会实时更新并保存到服务器
- **良好的用户体验**：编辑操作直观易懂，与项目列表的编辑方式保持一致

### 5. 实施范围
- **前端修改**：
  - `frontend/src/components/layout/MainLayout.tsx`：移除右侧详情面板
  - `frontend/src/components/project/ProjectDetailModal.tsx`：添加任务编辑功能

### 6. 测试验证
- 测试右侧详情面板是否成功移除
- 测试项目详情弹窗是否正常打开和关闭
- 测试所有任务字段的编辑功能是否正常工作
- 测试编辑后的数据是否成功保存到服务器
- 测试编辑交互是否与项目列表保持一致