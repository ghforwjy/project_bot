## 问题分析

**当前问题**：
1. chat.py中AI返回的JSON指令是正确的（用户看到的）
2. 但实际执行操作用的是extractor.py提取的结果（总是unknown）
3. 两处都在调用LLM，浪费资源且结果不一致

**根本原因**：
- chat.py中AI的回复包含JSON指令，但代码没有解析它
- 反而再次调用extract_project_info来提取意图，但这个提取结果有问题

## 重构方案

**方案：复用chat.py中AI返回的JSON指令**

### 步骤1：修改chat.py，从AI回复中解析JSON指令

在chat.py中AI返回回复后，直接从ai_content中解析JSON指令，而不是调用extract_project_info：

```python
# 从AI回复中解析JSON指令
import re
json_match = re.search(r'```json\n(.*?)\n```', ai_content, re.DOTALL)
if json_match:
    json_str = json_match.group(1)
    ai_instructions = json.loads(json_str)
    intent = ai_instructions.get('intent')
    data = ai_instructions.get('data', {})
else:
    intent = None
```

### 步骤2：使用解析出的intent和data执行操作

根据解析出的intent和数据执行相应的操作：
- create_project: 使用data中的project_name, description等
- assign_category: 使用data中的project_name和category_name
- 其他意图类似

### 步骤3：去除对extract_project_info的依赖

修改chat.py，不再调用extract_project_info，直接使用AI返回的JSON指令。

### 预期效果

- 只调用一次LLM，节省资源
- 复用意图识别正确的代码
- 保持前端显示和实际执行一致