# 修复甘特图时间轴错位和空间占用问题

## 问题分析
1. **时间轴错位**：时间轴标签与任务条时间不对应，可能是时间格式化或比例尺计算问题
2. **图例挤占空间**：图例显示在甘特图容器底部，与时间轴重叠
3. **甘特图长度限制**：甘特图宽度固定，无法根据时间范围自动调整

## 解决方案

### 1. 修复时间轴错位问题
- **原因**：时间格式化或比例尺计算错误
- **解决方法**：
  - 检查 `renderTimeAxis` 函数中的时间格式化逻辑
  - 确保 `xScale` 计算正确，与任务条使用相同的时间范围
  - 调整时间轴标签格式，确保显示完整的日期

### 2. 解决图例挤占空间问题
- **原因**：图例与甘特图共享同一个容器，没有独立的空间
- **解决方法**：
  - 将图例从甘特图容器中分离出来，作为独立的组件
  - 调整甘特图容器的布局，确保图例不会与时间轴重叠
  - 为图例提供独立的显示空间

### 3. 优化甘特图长度显示
- **原因**：甘特图宽度固定，无法根据时间范围自动调整
- **解决方法**：
  - 实现甘特图的水平滚动功能
  - 根据任务的时间范围动态计算甘特图的最小宽度
  - 确保时间轴能够完整显示所有任务的时间范围

## 技术实现

### 1. 修改甘特图容器布局
- 调整 `GanttChart.tsx` 中的容器结构，分离甘特图和图例
- 为甘特图添加水平滚动功能
- 确保图例有独立的显示空间

### 2. 修复时间轴渲染
- 检查并修复 `renderTimeAxis` 函数中的时间格式化逻辑
- 确保 `xScale` 计算与任务条使用相同的时间范围
- 调整时间轴标签的位置和格式

### 3. 优化时间范围计算
- 修改 `calculateTimeRange` 函数，确保时间范围计算准确
- 根据任务的实际时间范围动态调整甘特图宽度
- 实现水平滚动功能，确保所有时间都能显示

## 预期效果
- 时间轴与任务条时间完全对应
- 图例不再挤占甘特图的显示空间
- 甘特图能够根据任务时间范围自动调整长度，通过水平滚动查看所有内容

## 实现步骤
1. 打开 `frontend/src/components/gantt/GanttChart.tsx` 文件
2. 修改容器布局，分离甘特图和图例
3. 修复时间轴渲染逻辑，确保时间对齐
4. 实现甘特图的水平滚动功能
5. 测试修改后的显示效果
6. 调整样式和布局，确保显示美观