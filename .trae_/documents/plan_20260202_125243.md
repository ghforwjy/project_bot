## 问题场景

用户手滑输入错误消息后立即输入正确消息：
1. 用户想输入"查询项目大类列表"
2. 误输入"把信创纳入信创项目大类"
3. 立即输入"查询项目大类列表"
4. 两个请求几乎同时完成
5. 前端应该只显示"查询项目大类列表"的响应

## 解决方案

### 核心逻辑

每个用户消息有一个`request_id`：
- 前端生成并记录当前活跃的`request_id`
- 发送请求时带上`request_id`
- LLM响应时返回`request_id`
- 前端对比`request_id`，丢弃不匹配的响应

### 修改前端ChatPanel.tsx

```typescript
// 记录当前活跃的请求ID
const currentRequestIdRef = useRef<string | null>(null)

const handleSend = async () => {
  // 生成新的请求ID
  const newRequestId = `req_${Date.now()}`
  currentRequestIdRef.current = newRequestId
  
  // 发送请求
  const response = await fetch('/api/v1/chat/messages', {
    method: 'POST',
    body: JSON.stringify({ 
      message: userMessage, 
      session_id: sessionId,
      request_id: newRequestId
    })
  })
  
  // 检查响应是否过时
  if (currentRequestIdRef.current !== newRequestId) {
    console.log('响应已过时，丢弃')
    return  // 丢弃
  }
  
  // 正常显示
  addMessage(...)
}
```

### 修改后端chat.py

1. 从请求中获取`request_id`
2. 响应中返回`request_id`
3. 移除session_manager（不再需要）

### 测试验证

用Python测试：
```python
# 测试场景
request_ids = []

# 用户输入错误消息
request_ids.append(generate_request_id())
process_message("把信创纳入信创项目大类", request_ids[-1])

# 用户输入正确消息（立即）
request_ids.append(generate_request_id())
process_message("查询项目大类列表", request_ids[-1])

# 验证：只有request_ids[-1]的响应被显示
```

## 预期效果

- 正常多轮对话：每个请求独立，不相互干扰
- 快速纠正：旧请求的响应被丢弃，只显示新请求的响应